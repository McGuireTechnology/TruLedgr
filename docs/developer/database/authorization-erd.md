# Authorization Module - Entity Relationship Diagram

## Overview

This diagram shows the database schema for the **authorization** module, including related tables from other modules that have foreign key relationships.

### Core Tables (authorization module)
- `permissions`
- `role_permissions`
- `roles`

### Related Tables (from other modules)
- `users` (from users module)

### Total Tables in Diagram
4 tables

## Entity Relationship Diagram

```mermaid
# Authorization Module ERD\n\nerDiagram\n    USERS {\n        boolean is_deleted "Is Deleted"\n        datetime deleted_at "Deleted At"\n        datetime created_at "Created At"\n        datetime updated_at "Updated At"\n        string id PK "Id"\n        string(100) username UK "Username"\n        string(255) email UK "Email"\n        string(255) hashed_password "Hashed Password"\n        string(32) totp_secret "Totp Secret"\n        boolean totp_enabled "Totp Enabled"\n        string(1000) backup_codes "Backup Codes"\n        string(100) first_name "First Name"\n        string(100) last_name "Last Name"\n        string(500) profile_picture_url "Profile Picture Url"\n        string(1000) bio "Bio"\n        boolean is_active "Is Active"\n        boolean is_verified "Is Verified"\n        boolean email_verified "Email Verified"\n        datetime last_login "Last Login"\n        string role_id FK "Role Id"\n        boolean is_oauth_user "Is Oauth User"\n        string(50) oauth_provider "Oauth Provider"\n        string(255) oauth_provider_id "Oauth Provider Id"\n    }\n\n    ROLE_PERMISSIONS {\n        string role_id PK FK "Role Id"\n        string permission_id PK FK "Permission Id"\n        datetime assigned_at "Assigned At"\n        string assigned_by "Assigned By"\n    }\n\n    ROLES {\n        datetime created_at "Created At"\n        datetime updated_at "Updated At"\n        string id PK "Id"\n        string(100) name UK "Name"\n        string(500) description "Description"\n        boolean is_system "Is System"\n        boolean is_active "Is Active"\n    }\n\n    PERMISSIONS {\n        datetime created_at "Created At"\n        datetime updated_at "Updated At"\n        string id PK "Id"\n        string(100) name UK "Name"\n        string(500) description "Description"\n        string(50) resource "Resource"\n        string(50) action "Action"\n        boolean is_system "Is System"\n    }\n\n    ROLES ||--o{ USERS : "role"\n    ROLES ||--o{ PERMISSIONS : "role_permissions"\n    ROLES ||--o{ PERMISSIONS : "role_permissions"
```

## Table Descriptions

### `permissions`\n\n| Column | Type | Constraints | Description |\n|--------|------|-------------|-------------|\n| `created_at` | `DATETIME` |  | Created At |\n| `updated_at` | `DATETIME` |  | Updated At |\n| `id` | `VARCHAR` | PK, NOT NULL | Id |\n| `name` | `VARCHAR(100)` | UNIQUE, NOT NULL | Name |\n| `description` | `VARCHAR(500)` |  | Description |\n| `resource` | `VARCHAR(50)` | NOT NULL | Resource |\n| `action` | `VARCHAR(50)` | NOT NULL | Action |\n| `is_system` | `BOOLEAN` | NOT NULL | Is System |\n\n### `role_permissions`\n\n| Column | Type | Constraints | Description |\n|--------|------|-------------|-------------|\n| `role_id` | `VARCHAR` | PK, FK → roles.id, NOT NULL | Role Id |\n| `permission_id` | `VARCHAR` | PK, FK → permissions.id, NOT NULL | Permission Id |\n| `assigned_at` | `DATETIME` | NOT NULL | Assigned At |\n| `assigned_by` | `VARCHAR` |  | Assigned By |\n\n### `roles`\n\n| Column | Type | Constraints | Description |\n|--------|------|-------------|-------------|\n| `created_at` | `DATETIME` |  | Created At |\n| `updated_at` | `DATETIME` |  | Updated At |\n| `id` | `VARCHAR` | PK, NOT NULL | Id |\n| `name` | `VARCHAR(100)` | UNIQUE, NOT NULL | Name |\n| `description` | `VARCHAR(500)` |  | Description |\n| `is_system` | `BOOLEAN` | NOT NULL | Is System |\n| `is_active` | `BOOLEAN` | NOT NULL | Is Active |\n\n### `users` (users module)\n\n| Column | Type | Constraints | Description |\n|--------|------|-------------|-------------|\n| `is_deleted` | `BOOLEAN` | NOT NULL | Is Deleted |\n| `deleted_at` | `DATETIME` |  | Deleted At |\n| `created_at` | `DATETIME` |  | Created At |\n| `updated_at` | `DATETIME` |  | Updated At |\n| `id` | `VARCHAR` | PK, NOT NULL | Id |\n| `username` | `VARCHAR(100)` | UNIQUE, NOT NULL | Username |\n| `email` | `VARCHAR(255)` | UNIQUE, NOT NULL | Email |\n| `hashed_password` | `VARCHAR(255)` |  | Hashed Password |\n| `totp_secret` | `VARCHAR(32)` |  | Totp Secret |\n| `totp_enabled` | `BOOLEAN` | NOT NULL | Totp Enabled |\n| `backup_codes` | `VARCHAR(1000)` |  | Backup Codes |\n| `first_name` | `VARCHAR(100)` |  | First Name |\n| `last_name` | `VARCHAR(100)` |  | Last Name |\n| `profile_picture_url` | `VARCHAR(500)` |  | Profile Picture Url |\n| `bio` | `VARCHAR(1000)` |  | Bio |\n| `is_active` | `BOOLEAN` | NOT NULL | Is Active |\n| `is_verified` | `BOOLEAN` | NOT NULL | Is Verified |\n| `email_verified` | `BOOLEAN` | NOT NULL | Email Verified |\n| `last_login` | `DATETIME` |  | Last Login |\n| `role_id` | `VARCHAR` | FK → roles.id | Role Id |\n| `is_oauth_user` | `BOOLEAN` | NOT NULL | Is Oauth User |\n| `oauth_provider` | `VARCHAR(50)` |  | Oauth Provider |\n| `oauth_provider_id` | `VARCHAR(255)` |  | Oauth Provider Id |\n\n## Relationships\n\n- `role_permissions.role_id` → `roles.id`\n- `role_permissions.permission_id` → `permissions.id`\n- `users.role_id` → `roles.id`\n